[日本語](README.ja.md) | [中文](README.zh.md)

---
# Cognitive Complexity Checklist

**A Metacognitive Tool to Prevent LLM's "Planning Fallacy" and Confront True Task Complexity**

---

## Overview

The `Cognitive Complexity Checklist` is a tool designed to mitigate the cognitive bias of Large Language Models (LLMs) that causes them to underestimate task complexity, similar to the human "planning fallacy."

In their pursuit of efficiency, LLMs tend to process inherently complex tasks with a superficial level of understanding (System 1 thinking). This can lead to a decline in output quality and the oversight of critical elements.

This tool dynamically generates a checklist that compels the LLM to engage in a "metacognitive" process. It prompts the LLM to systematically evaluate the intrinsic and extrinsic cognitive loads of a task, encouraging a shift towards deeper, more deliberate thought (System 2 thinking). The generated checklist acts as a "cognitive scaffold," enabling the LLM to monitor and regulate its own thought processes.

## Core Principle of Usage

**Crucial**: When an LLM receives a task instruction from a user, it **must** execute the `create_task_checklist` tool before beginning the actual processing.

This is because the initial reaction to a task (System 1), no matter how simple it may seem, carries the risk of overlooking potential complexities. Running this tool first forces the LLM into a metacognitive stage (System 2), allowing for a more careful and multifaceted analysis of the task requirements. Adhering to this discipline is key to maximizing the tool's value and producing high-quality results.

### Best Practices for Checklist Tracking

A common challenge with LLMs is their tendency to "forget" the checklist after generating it. To solve this, it's crucial to establish a workflow where the LLM acts as a diligent project manager. The `update_todo_list` tool is essential for this process.

**Recommended Workflow:**

1.  **Assign a Role**: At the start of a task, explicitly instruct the LLM:
    > "You are a task manager. Your responsibility is to register the items generated by `create_task_checklist` into a TODO list using the `update_todo_list` tool and meticulously track and update the progress of each item."

2.  **Initialize the Checklist**: Immediately after `create_task_checklist` generates the list, use the `update_todo_list` tool to register all items. Mark the first item as "in progress" `[-]`.

    **Example `update_todo_list` call:**
    ```xml
    <update_todo_list>
    <todos>
    [-] Phase 1: Comprehension
    [ ] Phase 2: Assessment
    [ ] Phase 3: Planning
    [ ] Phase 4: Execution
    [ ] Phase 5: Validation
    [ ] Phase 6: Reflection
    </todos>
    </update_todo_list>
    ```

3.  **Enforce State Updates**: Each time the LLM completes a task item, it **must** call `update_todo_list` again to update the status. Mark the completed item as "completed" `[x]` and the next item as "in progress" `[-]`.

4.  **Self-Reference**: At the beginning of each step, the LLM should refer to the current TODO list to confirm what needs to be done next. This creates a stateful loop, preventing the checklist from being forgotten.

By following this workflow, the LLM is forced to maintain context and actively manage the task state, transforming the checklist from a static, one-off artifact into a dynamic and genuinely useful project management tool.

## Key Features

- **Dynamic Checklist Generation**: Creates a hierarchical checklist in JSON format to manage cognitive load, based on the task description and initial complexity assessment.
- **Forced Metacognitive Process**: Defines six cognitive phases—Comprehension, Assessment, Planning, Execution, Validation, and Reflection—to guide the LLM through each stage reliably.
- **Shift to System 2 Thinking**: Intentionally activates deep, analytical thinking for complex tasks to improve the quality of the output.

## Tech Stack

- **Server**: Python 3
- **Web Framework**: [FastMCP](https://github.com/model-context-protocol/fastmcp)
- **Package Manager**: [uv](https://github.com/astral-sh/uv)

## Setup and Execution

1.  **Clone the repository**:
    ```bash
    git clone https://github.com/your-username/complexity_checklist.git
    cd complexity_checklist
    ```

2.  **Install dependencies**:
    The project root contains the `cognitive_checklist_server` directory. Use `uv` to install its dependencies.
    ```bash
    uv pip install -e cognitive_checklist_server
    ```

3.  **Start the MCP server**:
    Launch the MCP server with the following command:
    ```bash
    uv run --directory cognitive_checklist_server server.py
    ```
    The server will start and await connections from an MCP client.

## MCP Client Configuration

To use this server from an MCP client like Kilo Code, add the following configuration to your client's settings file.

```json
{
  "cognitive-checklist-server": {
    "autoApprove": [
      "create_task_checklist"
    ],
    "disabled": false,
    "timeout": 60,
    "type": "stdio",
    "command": "uv",
    "args": [
      "run",
      "--directory",
      "/path/to/your/complexity_checklist/cognitive_checklist_server",
      "server.py"
    ],
    "alwaysAllow": [
      "create_task_checklist"
    ]
  }
}
```
**Note**: Replace `/path/to/your/complexity_checklist` with the absolute path to the repository in your environment.

## License

This project is licensed under the [MIT License](LICENSE).
