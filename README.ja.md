[English](README.md) | [中文](README.zh.md)

---
# Cognitive Complexity Checklist

**LLMの「計画錯誤」を防ぎ、タスクの真の複雑性に向き合うためのメタ認知ツール**

---

## 概要

`Cognitive Complexity Checklist` は、大規模言語モデル (LLM) がタスクを実行する際に、その複雑性を過小評価してしまう認知バイアス（計画錯誤に類似）を軽減するためのツールです。

LLMは効率性を追求するあまり、本質的に複雑なタスクに対しても表層的な理解（System 1思考）で処理しようとする傾向があります。その結果、アウトプットの品質が低下したり、重要な要素が見落とされたりする問題が発生します。

このツールは、LLMに「メタ認知」のプロセスを強制するチェックリストを動的に生成します。これにより、LLMはタスクの内在的・外在的負荷を体系的に評価し、より深く慎重な思考（System 2思考）へと切り替えることを促されます。生成されたチェックリストは、LLMが自身の思考プロセスを監視・制御するための「認知的な足場」として機能します。

## 利用の基本原則

**最重要**: LLMはユーザーからタスクの指示を受けた際、実際の処理を開始する前に、**必ず**この `create_task_checklist` ツールを実行しなければなりません。

これは、タスクへの初期反応（System 1）が、いかに単純に見えようとも、潜在的な複雑性を見落とす危険性をはらんでいるためです。このツールを最初に実行することで、LLMは強制的にメタ認知の段階（System 2）へ移行し、タスクの要求事項をより慎重かつ多角的に分析することができます。この規律を徹底することが、本ツールの価値を最大化し、高品質な成果を生み出す鍵となります。

### チェックリスト追跡のためのベストプラクティス

LLMがチェックリストを生成した後にその存在を「忘れてしまう」ことは、よくある課題です。この問題を解決するためには、LLMが勤勉なプロジェクトマネージャーとして機能するようなワークフローを確立することが極めて重要です。そのプロセスにおいて、`update_todo_list`ツールが不可欠な役割を果たします。

**推奨ワークフロー:**

1.  **役割を与える**: タスクの開始時に、LLMに次のように明確に指示します。
    > 「あなたはタスクマネージャーです。あなたの責務は、`create_task_checklist`ツールで生成された項目を`update_todo_list`ツールを使ってTODOリストに登録し、各項目の進捗を厳密に追跡・更新することです。」

2.  **チェックリストの初期化**: `create_task_checklist`がリストを生成したら、即座に`update_todo_list`ツールを使用して全項目を登録します。最初の項目は「進行中 `[-]`」としてマークします。

    **`update_todo_list`の呼び出し例:**
    ```xml
    <update_todo_list>
    <todos>
    [-] フェーズ1: 理解
    [ ] フェーズ2: 評価
    [ ] フェーズ3: 計画
    [ ] フェーズ4: 実行
    [ ] フェーズ5: 検証
    [ ] フェーズ6: 振り返り
    </todos>
    </update_todo_list>
    ```

3.  **状態更新の徹底**: LLMが一つのタスク項目を完了するたびに、**必ず**`update_todo_list`を再度呼び出して状態を更新させます。完了した項目は「完了 `[x]`」に、次の項目は「進行中 `[-]`」に更新します。

4.  **自己参照**: 各ステップの開始時に、LLMは現在のTODOリストを参照し、次に行うべきことを確認します。これにより、状態を持つループが形成され、チェックリストが忘れ去られるのを防ぎます。

このワークフローに従うことで、LLMは文脈を維持し、タスクの状態を能動的に管理することを強制されます。これにより、チェックリストは静的な一度きりの成果物から、動的で真に役立つプロジェクト管理ツールへと変貌します。

## 主な機能

- **動的なチェックリスト生成**: タスクの説明と初期の複雑性評価に基づき、認知負荷を管理するための階層的なチェックリストをJSON形式で生成します。
- **メタ認知プロセスの強制**: 「理解」「評価」「計画」「実行」「検証」「振り返り」という6つの認知フェーズを定義し、LLMが各段階を確実に経るように誘導します。
- **System 2思考への切り替え**: 複雑なタスクに対して、意図的に深く、分析的な思考をアクティベートさせ、アウトプットの品質向上を図ります。

## 技術スタック

- **サーバー**: Python 3
- **Webフレームワーク**: [FastMCP](https://github.com/model-context-protocol/fastmcp)
- **パッケージ管理**: [uv](https://github.com/astral-sh/uv)

## セットアップと実行

1.  **リポジトリをクローンします**:
    ```bash
    git clone https://github.com/your-username/complexity_checklist.git
    cd complexity_checklist
    ```

2.  **依存関係をインストールします**:
    プロジェクトルートには `cognitive_checklist_server` ディレクトリがあります。`uv` を使って、このサーバーの依存関係をインストールします。
    ```bash
    uv pip install -e cognitive_checklist_server
    ```

3.  **MCPサーバーを起動します**:
    以下のコマンドでMCPサーバーを起動します。
    ```bash
    uv run --directory cognitive_checklist_server server.py
    ```
    サーバーが起動し、MCPクライアントからの接続を待ち受けます。

## MCPクライアント設定

Kilo CodeなどのMCPクライアントからこのサーバーを利用するには、クライアントの設定ファイルに以下の構成を追加してください。

```json
{
  "cognitive-checklist-server": {
    "autoApprove": [
      "create_task_checklist"
    ],
    "disabled": false,
    "timeout": 60,
    "type": "stdio",
    "command": "uv",
    "args": [
      "run",
      "--directory",
      "/path/to/your/complexity_checklist/cognitive_checklist_server",
      "server.py"
    ],
    "alwaysAllow": [
      "create_task_checklist"
    ]
  }
}
```
**注意**: `/path/to/your/complexity_checklist` の部分は、あなたの環境におけるリポジトリの絶対パスに置き換えてください。

## ライセンス

このプロジェクトは [MIT License](LICENSE) の下で公開されています。